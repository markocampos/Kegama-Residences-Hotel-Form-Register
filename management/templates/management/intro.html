{% extends 'management/base.html' %}
{% load static %}

{% block title %}Welcome | Kegama{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-orange-500 to-orange-700 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden">

    <!-- Background Decor -->
    <div class="absolute top-0 left-0 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
    <div class="absolute bottom-0 right-0 w-80 h-80 bg-orange-900 opacity-20 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"></div>

    <div class="relative z-10 w-full max-w-md flex flex-col items-center">
        
        <!-- Logo -->
        <div class="mb-8 p-6 bg-white rounded-3xl shadow-2xl shadow-orange-900/20 transform hover:scale-105 transition-transform duration-500">
            <img src="{% static 'images/logo.png' %}" alt="Kegama Logo" class="w-32 h-auto object-contain">
        </div>

        <!-- Welcome Text -->
        <h1 class="text-4xl font-bold text-white mb-2 tracking-tight">Welcome</h1>
        <p class="text-orange-100 text-lg mb-8 font-light tracking-wide">to Kegama Residences</p>

        <p class="text-white/80 text-sm mb-10 max-w-xs leading-relaxed">
            Experience comfort and luxury. <br>Please check-in to begin your stay with us.
        </p>

        <!-- CTA Button -->
        <a href="{% url 'guest_form_page' %}" class="w-full bg-white text-orange-600 font-bold text-lg py-4 rounded-xl shadow-xl hover:bg-orange-50 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 group mb-4">
            PROCEED TO CHECK-IN
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
        </a>

        <!-- Install PWA Button (Hidden by default) -->
        <button id="install-btn" class="hidden w-full bg-orange-800/30 text-white font-semibold text-sm py-3 rounded-xl hover:bg-orange-800/50 transition-colors flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
            INSTALL APP
        </button>

        <!-- Footer Info -->
        <div class="mt-8 text-orange-200/60 text-xs">
            &copy; {% now "Y" %} Kegama Residences Management
        </div>

    </div>
</div>

<script>
    let deferredPrompt;
    const installBtn = document.getElementById('install-btn');

    window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
        // Update UI to notify the user they can add to home screen
        installBtn.classList.remove('hidden');
    });

    installBtn.addEventListener('click', (e) => {
        // Hide our user interface that shows our A2HS button
        installBtn.classList.add('hidden');
        // Show the prompt
        deferredPrompt.prompt();
        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the A2HS prompt');
            } else {
                console.log('User dismissed the A2HS prompt');
            }
            deferredPrompt = null;
        });
    });
</script>
{% endblock %}
